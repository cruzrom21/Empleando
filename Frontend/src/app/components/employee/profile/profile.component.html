<div class="container mx-auto p-4">
    <div class="bg-white p-6 rounded-lg shadow">
        <h2 class="text-2xl font-bold mb-4">Perfil de Usuario</h2>


        <div class="flex items-center mb-4">
            <div class="w-16 h-16 bg-gray-200 rounded-full mr-4"></div>
            <div>
                <h3 class="text-xl font-bold">{{ name }} </h3>
            </div>
        </div>
        <div class="mb-4">
            <h3 class="text-lg font-bold mb-2">Información Personal</h3>

            <div *ngFor="let info of arrInfo()">
                <p class="text-gray-700">{{ info.type }}: {{ info.value }}</p>
            </div>
        </div>
        <div class="mb-4">
            <h3 class="text-lg font-bold mb-2">Experiencia Laboral</h3>
            <ul>
                <li *ngFor="let ex of arrEx()">
                    <p class="text-gray-700">{{ ex.cargo }} | {{ ex.company }} | {{ ex.initDate| date:'yyyy' }} - {{
                        ex.finalDate | date:'yyyy' }} </p>
                </li>
            </ul>
        </div>
        <div class="mb-4">
            <h3 class="text-lg font-bold mb-2">Educación</h3>
            <ul>
                <li *ngFor="let edu of arrEdu()">
                    <p class="text-gray-700">{{ edu.titulo }} | {{ edu.institute }} | {{ edu.initDate| date:'yyyy' }} -
                        {{ edu.finalDate | date:'yyyy' }} </p>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="container mx-auto p-4">
    <div class="bg-white p-6 rounded-lg shadow">
        <h2 class="text-2xl font-bold mb-4">Habilidades</h2>

        <div class="mb-4">

            <div class="mb-4">
                <label for="habilidad" class="block text-sm font-medium text-gray-700">Agregar habilidad</label>
                <select id="habilidad" name="habilidad" class="w-full px-3 py-2 border rounded-md mt-1" #habilidad>
                    <option *ngFor="let s of arrSkill()" value="{{ s.idSkills }}">{{ s.skill1 }}</option>
                </select>
            </div>            

            <div class="flex flex-wrap">
                <div *ngFor="let a of arrHab()">
                    <div class="bg-gray-200 px-3 py-1 rounded-md text-sm text-gray-700 mr-2 mb-2">{{ a.habilidad }}
                    </div>
                </div>
            </div>

            <div class="flex justify-end">
                <button type="submit"
                    class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors" (click)="CrearHabilidad(habilidad.value)">Agregar habilidad</button>
            </div>
        </div>
    </div>
</div>

<form [formGroup]="profileFrom" (ngSubmit)="onSubmitProfile()">
    <div class="container mx-auto p-4">
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-2xl font-bold mb-4">Editar Perfil</h2>

            <div class="mb-4">
                <label for="name" class="block text-sm font-medium text-gray-700">Nombre de Usuario</label>
                <input type="text" id="name" name="name" formControlName="name"
                    class="w-full px-3 py-2 border rounded-md mt-1 {{ profileFrom.get('name')?.invalid && profileFrom.get('name')?.touched ? 'border-red-500' : '' }}">

                <div *ngIf="profileFrom.get('name')?.hasError('required') && profileFrom.get('name')?.touched"
                    class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
            </div>

            <div class="mb-4">
                <label for="birthdate" class="block text-sm font-medium text-gray-700">Fecha de nacimiento</label>
                <input type="date" id="birthdate" name="birthdate" formControlName="birthdate"
                    class="w-full px-3 py-2 border rounded-md mt-1  {{ profileFrom.get('birthdate')?.invalid && profileFrom.get('birthdate')?.touched ? 'border-red-500' : '' }}">

                <div *ngIf="profileFrom.get('birthdate')?.hasError('required') && profileFrom.get('birthdate')?.touched"
                    class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
            </div>

            <div class="mb-4">
                <label for="location" class="block text-sm font-medium text-gray-700">Ubicación</label>
                <input type="text" id="location" name="location" formControlName="location"
                    class="w-full px-3 py-2 border rounded-md mt-1  {{ profileFrom.get('location')?.invalid && profileFrom.get('location')?.touched ? 'border-red-500' : '' }}">

                <div *ngIf="profileFrom.get('location')?.hasError('required') && profileFrom.get('location')?.touched"
                    class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
            </div>

            <div class="mb-4">
                <label for="phone" class="block text-sm font-medium text-gray-700">Telefono de contacto</label>
                <input type="text" id="phone" name="phone" formControlName="phone"
                    class="w-full px-3 py-2 border rounded-md mt-1  {{ profileFrom.get('phone')?.invalid && profileFrom.get('phone')?.touched ? 'border-red-500' : '' }}">

                <div *ngIf="profileFrom.get('phone')?.hasError('required') && profileFrom.get('phone')?.touched"
                    class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
            </div>

            <div class="flex justify-end">
                <button type="submit"
                    [ngClass]="{ 'opacity-50 cursor-not-allowed': profileFrom.invalid, 'opacity-100 cursor-pointer': !profileFrom.invalid }"
                    [disabled]="profileFrom.invalid"
                    class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">Guardar
                    Experiencia</button>
            </div>

        </div>
    </div>
</form>

<form [formGroup]="experienceFrom" (ngSubmit)="onSubmitEx()">
    <div class="container mx-auto p-4">
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-2xl font-bold mb-4">Experiencia Laboral</h2>

            <div class="mb-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="Cargo" class="block text-sm font-medium text-gray-700">Cargo</label>
                        <input type="text" id="Cargo" name="Cargo" formControlName="Cargo"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ experienceFrom.get('Cargo')?.invalid && experienceFrom.get('Cargo')?.touched ? 'border-red-500' : '' }}">

                        <div *ngIf="experienceFrom.get('Cargo')?.hasError('required') && experienceFrom.get('Cargo')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
                    </div>
                    <div>
                        <label for="Company" class="block text-sm font-medium text-gray-700">Empresa</label>
                        <input type="text" id="Company" name="Company" formControlName="Company"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ experienceFrom.get('Company')?.invalid && experienceFrom.get('Company')?.touched ? 'border-red-500' : '' }}">

                        <div *ngIf="experienceFrom.get('Company')?.hasError('required') && experienceFrom.get('Company')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
                    </div>
                    <div>
                        <label for="InitDate" class="block text-sm font-medium text-gray-700">Fecha de Inicio</label>
                        <input type="date" id="InitDate" name="InitDate" formControlName="InitDate"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ experienceFrom.get('InitDate')?.invalid && experienceFrom.get('InitDate')?.touched ? 'border-red-500' : '' }}">

                        <div *ngIf="experienceFrom.get('InitDate')?.hasError('required') && experienceFrom.get('InitDate')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
                    </div>
                    <div>
                        <label for="FinalDate" class="block text-sm font-medium text-gray-700">Fecha de Fin</label>
                        <input type="date" id="FinalDate" name="FinalDate" formControlName="FinalDate"
                            class="w-full px-3 py-2 border rounded-md mt-1">

                        <div class="flex items-center mt-2">
                            <input type="checkbox" id="current-job" name="current-job" class="mr-2">
                            <label for="current-job" class="text-sm text-gray-700">Sin finalizar</label>
                        </div>
                    </div>
                    <div class="col-span-2">
                        <label for="Description" class="block text-sm font-medium text-gray-700">Descripción del
                            Trabajo</label>
                        <textarea id="Description" name="Description" rows="4" formControlName="Description"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ experienceFrom.get('Description')?.invalid && experienceFrom.get('Description')?.touched ? 'border-red-500' : '' }}"></textarea>

                        <div *ngIf="experienceFrom.get('Description')?.hasError('required') && experienceFrom.get('Description')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>

                        <div *ngIf="experienceFrom.get('Description')?.hasError('maxlength') && experienceFrom.get('Description')?.touched"
                            class="text-red-500 text-sm mt-1">Debe tener maximo 150 caracteres</div>
                    </div>
                    <div class="flex justify-end col-span-2">
                        <button type="submit"
                            [ngClass]="{ 'opacity-50 cursor-not-allowed': experienceFrom.invalid, 'opacity-100 cursor-pointer': !experienceFrom.invalid }"
                            [disabled]="experienceFrom.invalid"
                            class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">Guardar
                            Experiencia</button>
                    </div>


                </div>
            </div>
        </div>
    </div>
</form>


<form [formGroup]="eduFrom" (ngSubmit)="onSubmitEdu()">
    <div class="container mx-auto p-4">
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-2xl font-bold mb-4">Educacion</h2>

            <div class="mb-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="Titulo" class="block text-sm font-medium text-gray-700">Titulo</label>
                        <input type="text" id="Titulo" name="Titulo" formControlName="Titulo"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ eduFrom.get('Titulo')?.invalid && eduFrom.get('Titulo')?.touched ? 'border-red-500' : '' }}">

                        <div *ngIf="eduFrom.get('Titulo')?.hasError('required') && eduFrom.get('Titulo')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
                    </div>
                    <div>
                        <label for="Institute" class="block text-sm font-medium text-gray-700">Instituto</label>
                        <input type="text" id="Institute" name="Institute" formControlName="Institute"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ eduFrom.get('Institute')?.invalid && eduFrom.get('Institute')?.touched ? 'border-red-500' : '' }}">

                        <div *ngIf="eduFrom.get('Institute')?.hasError('required') && eduFrom.get('Institute')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
                    </div>
                    <div>
                        <label for="InitDate" class="block text-sm font-medium text-gray-700">Fecha de Inicio</label>
                        <input type="date" id="InitDate" name="InitDate" formControlName="InitDate"
                            class="w-full px-3 py-2 border rounded-md mt-1 {{ eduFrom.get('InitDate')?.invalid && eduFrom.get('InitDate')?.touched ? 'border-red-500' : '' }}">

                        <div *ngIf="eduFrom.get('InitDate')?.hasError('required') && eduFrom.get('InitDate')?.touched"
                            class="text-red-500 text-sm mt-1">Este campo es obligatorio</div>
                    </div>
                    <div>
                        <label for="FinalDate" class="block text-sm font-medium text-gray-700">Fecha de Fin</label>
                        <input type="date" id="FinalDate" name="FinalDate" formControlName="FinalDate"
                            class="w-full px-3 py-2 border rounded-md mt-1">
                        <div class="flex items-center mt-2">
                            <input type="checkbox" id="current-job" name="current-job" class="mr-2">
                            <label for="current-job" class="text-sm text-gray-700">Sin finalizar</label>
                        </div>
                    </div>
                    <div class="flex justify-end col-span-2">
                        <button type="submit"
                            [ngClass]="{ 'opacity-50 cursor-not-allowed': eduFrom.invalid, 'opacity-100 cursor-pointer': !eduFrom.invalid }"
                            [disabled]="eduFrom.invalid"
                            class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">Guardar
                            Educacion</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div *ngIf="alertSuccess"
    class="fixed top-0 right-0 mt-10 mr-10 z-50 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg"
    role="alert">
    <strong class="font-bold">Éxito!</strong><br>
    <span class="block sm:inline">{{ response.mensaje }}</span>
</div>

<div *ngIf="alertError"
    class="fixed top-0 right-0 mt-10 mr-10 z-50 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg"
    role="alert">
    <strong class="font-bold">Error!</strong><br>
    <span class="block sm:inline">{{ response.mensaje }}</span>
</div>